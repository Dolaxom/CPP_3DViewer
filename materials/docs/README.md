# 3DViewer_v2.0

> russian version only.

## Информация об Vulkan

### Основные комоненты

Для создания приложения на Vulkan необходимо создать объект класса Vulkan - VkInstance. Он содержит в себе информацию о логическом и физическом устройстве. Физическим устройством является любой видео-графический компонент в ПК, например внешняя или встроенная видеокарта. Логическое устройство это надстройка над физическим устройством и его драйвером.Устройство содержит в себе очереди команд, **графическую** для отрисовки, **вычислиельную** для математических операций, **трансферную** для случаев, когда надо перенести изображение с CPU на GPU и наоборот.

![alt text](imgs/1.png)

### Работа с окном

Vulkan API не умет сам напрямую общаться с окном, поэтому нужно встраивать его в существующее окно, созданное другой библиотекой (пример с **glfw**: ``S21Window::createWindowSurface``). **Swapchain** отвечает за двойную/тройную буферизацию, **View** в Image является протоколом доступа памяти изображения.

![alt text](imgs/2.png)

### Графический конвейер

Для Vulkan API небходимо явно указывать, в какой последовательности и по каким правилам необходимо отрисовывать изображение. За это отвечают файлы ``src/pipeline.*``. Шейдеры **Spir-V** это оболочка над glsl (Шейдеры OpenGL).

![alt text](imgs/3.png)

### Цикл рендеринга

В конце концов в цикл рендера попадают команды, которые выгружаются из очередей, набор ссылок на матрицы, шейдеры и изображения, полученные в результате прохода по графическому конвейеру.

![alt text](imgs/4.png)

## Сборка программы

### Библиотеки

Для сборки необходимы библиотеки [Vulkan SDK](https://vulkan.lunarg.com/sdk/home#windows "Vulkan API"), [GLFW-3 x64](https://www.glfw.org/download.html "GLFW") для работы с окнами, [GLM](https://github.com/g-truc/glm/releases/ "GLM") для математических вычислений и [ImGui](https://github.com/ocornut/imgui/releases/ "ImGui") для рисования пользовательского интерфейса.

### Процесс сборки

В директорию проекта ``src/libraries/`` необходимо добавить исходники библиотеки **glfw-3** (glfw-3.3.8.bin.WIN64) и **glm**. В директории проекта ``src/tests/`` должна быть добавлена папка **packages** - это стандартная папка от Visual Studio, которая генерируется при создании Google Test проекта.
